<scxml initial="idle" final="ArrayDestroyed" version="0.9" xmlns="http://www.w3.org/2005/07/scxml">
	<state id="idle">
		<transition event="Array.creation" target="ArrayCreated"></transition>
	</state>
	<state id="ArrayCreated">
		<!-- Expected behaviour -->
		<transition event="Interferometry.init" target="InterferometryInitialize"></transition>
		<!-- Bad state -->
		<transition event="Interferometry.sumAntenna" target="Exception"></transition>
	</state>

	<state id="InterferometryInitialize">
		<!-- Bad states -->
		<transition event="Interferometry.twoAntennas" target="Exception"></transition>
		<transition event="Interferometry.cleanup" target="InterferometryBeginCleanUp"></transition>
		<!-- Expected behaviour -->
		<transition event="Interferometry.settingUp" target="InterferometryBeginSettingUp"></transition>
	</state>

	<state id="InterferometryBeginSettingUp">
		<!-- Bad state -->
		<transition event="Interferometry.cleanup" target="InterferometryBeginCleanUp"></transition>
		<!-- Expected behaviour -->
		<transition event="Interferometry.settingUpEnd" target="InterferometryEndSettingUp"></transition>
	</state>

	<state id="InterferometryEndSettingUp">
		<!-- Expected behaviour -->
		<transition event="ObservingMode.beginScan" target="ObservingModeBeginScan"></transition>
	</state>
	
	<state id="ObservingModeBeginScan">
		<transition event="Interferometry.doSubScanSequence" target="InterferometryStartSubscan"></transition>
	</state>
	
	<state id="InterferometryStartSubscan">
		<transition event="SubscanSequence.run" target="SubscanSequenceSettingUp"></transition>
		<transition event="SubscanSequence.runException" target="SubscanSequenceException"></transition>
	</state>
	
	<state id="SubscanSequenceSettingUp">
		<transition event="ObservingMode.beginSubscan" target="SubscanSequenceLoopStart"></transition>
		<transition event="SubscanSequence.runException" target="SubscanSequenceException"></transition>
	</state>
	
	<state id="SubscanSequenceLoopStart">
		<transition event="ObservingMode.endSubscan" target="SubscanSequenceLoopEnd"></transition>
		<transition event="SubscanSequence.runException" target="SubscanSequenceException"></transition>
	</state>
	
	<state id="SubscanSequenceLoopEnd">
		<transition event="ObservingMode.beginSubscan" target="SubscanSequenceLoopStart"></transition>
		<transition event="ObservingMode.endScan" target="ObservingModeEndScan"></transition>
		<transition event="SubscanSequence.runException" target="SubscanSequenceException"></transition>
	</state>

	<state id="ObservingModeEndScan">
		<transition event="ObservingMode.beginScan" target="ObservingModeBeginScan"></transition>
		<transition event="Interferometry.cleanup" target="InterferometryBeginCleanUp"></transition>
	</state>
	
	<state id="InterferometryBeginCleanUp">
		<transition event="Interferometry.endcleanup" target="InterferometryEndCleanUp"></transition>
	</state>
	
	<state id="InterferometryEndCleanUp">
		<transition event="Interferometry.settingUpException" target="Exception"></transition>
		<transition event="Interferometry.init" target="InterferometryInitialize"></transition>
		<transition event="Array.destruction" target="ArrayDestroyed"></transition>
	</state>
	
	<state id="SubscanSequenceException">
		<transition event="ObservingMode.endScan" target="ObservingModeEndScan"></transition>
		<transition event="Interferometry.cleanup" target="InterferometryCleanUp"></transition>
		<transition event="Array.destruction" target="ArrayDestroyed"></transition>
	</state>

	<state id="Exception">
		<transition event="Interferometry.init" target="InterferometryInitialize"></transition>
		<transition event="Array.destruction" target="ArrayDestroyed"></transition>
	</state>

	<final id="ArrayDestroyed">
		
	</final>
</scxml>
